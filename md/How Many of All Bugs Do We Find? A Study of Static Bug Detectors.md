# How Many of All Bugs Do We Find? A Study of Static Bug Detectors

## ABSTRACT

Static bug detectors are becoming increasingly popular and are widely used by professional software developers. While most work on bug detectors focuses on whether they find bugs at all, and on how many false positives they report in addition to legitimate warnings, the inverse question is often neglected: How many of all real-world bugs do static bug detectors find? This paper addresses this question by studying the results of applying three widely used static bug detectors to an extended version of the Defects4J dataset that consists of 15 Java projects with 594 known bugs. To decide which of these bugs the tools detect, we use a novel methodology that combines an automatic analysis of warnings and bugs with a manual validation of each candidate of a detected bug. The results of the study show that: (i) static bug detectors find a non-negligible amount of all bugs, (ii) different tools are mostly complementary to each other, and (iii) current bug detectors miss the large majority of the studied bugs. A detailed analysis of bugs missed by the static detectors shows that some bugs could have been found by variants of the existing detectors, while others are domain-specific problems that do not match any existing bug pattern. These findings help potential users of such tools to assess their utility, motivate and outline directions for future work on static bug detection, and provide a basis for future comparisons of static bug detection with other bug finding techniques, such as manual and automated testing.

静态bug检测器正变得越来越流行，并被专业软件开发人员广泛使用。虽然大多数bug检测器的工作都集中在它们是否找到了bug，以及除了合法的警告之外，它们还报告了多少错误，但是相反的问题常常被忽略:所有真实的bug中有多少是静态bug检测器发现的?本文通过研究将三种广泛使用的静态bug检测器应用到扩展版的缺陷4j数据集的结果来解决这个问题，该数据集由15个Java项目组成，其中有594个已知bug。为了确定工具检测到哪些bug，我们使用了一种新方法，该方法将对警告和bug的自动分析与对检测到的每个候选bug的手动验证相结合。研究结果表明:(1)静态的bug检测器发现的bug数量是不可忽视的;(2)不同的工具大多是互补的;(3)当前的bug检测器遗漏了大部分被研究的bug。对静态检测器遗漏的bug的详细分析表明，有些bug可能是由现有检测器的变体发现的，而其他的则是与现有bug模式不匹配的特定于域的问题。这些发现有助于这些工具的潜在用户评估它们的效用、激励和概述未来静态bug检测工作的方向，并为将来静态bug检测与其他bug发现技术(如手动和自动测试)的比较提供基础。

## 1 INTRODUCTION

Finding software bugs is an important but difficult task. For average industry code, the number of bugs per 1,000 lines of code has been estimated to range between 0.5 and 25 [21]. Even after years of deployment, software still contains unnoticed bugs. For example, studies of the Linux kernel show that the average bug remains in the kernel for a surprisingly long period of 1.5 to 1.8 years [8, 24]. Unfortunately, a single bug can cause serious harm, even if it has been subsisting for a long time without doing so, as evidenced by examples of software bugs that have caused huge economic loses and even killed people [17, 28, 46].

- [21] Steve McConnell. 2004. Code Complete: A Practical Handbook of Software Construction, Second Edition. Microsoft Press
- [8] Andy Chou, Junfeng Yang, Benjamin Chelf, Seth Hallem, and Dawson R. Engler.
An Empirical Study of Operating System Errors. In Symposium on Operating Systems Principles (SOSP). 73–88. http://doi.acm.org/10.1145/502034.502042
- [24] Nicolas Palix, Gaël Thomas 0001, Suman Saha, Christophe Calvès, Julia L. Lawall, and Gilles Muller. 2011. Faults in linux: ten years later. In Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS). ACM, 305–318

发现软件缺陷是一项重要但困难的任务。对于平均的行业代码，每1,000行代码的bug数量估计在0.5到25[21]之间。即使经过多年的部署，软件仍然包含未被发现的bug。例如，对Linux内核的研究表明，内核中的平均错误持续的时间出奇地长，为1.5到1.8年[8,24]。不幸的是，一个单独的bug可能会造成严重的危害，即使它已经存在了很长一段时间而没有这样做，正如一些软件bug的例子所证明的那样，这些bug已经造成了巨大的经济损失，甚至导致人员死亡[17,28,46]。

## 5 CONCLUSION

This paper investigates how many of all bugs can be found by current static bug detectors. To address this question, we study a set of 594 real-world Java bugs and three widely used bug detection tools. The core of our study is a novel methodology to assess the recall of bug detectors, which identifies detected bugs through a combination of automatic, line-based matching and manual validation of candidates for detected bugs. The main findings of the study include the following: (i) Static bug detectors find a non-negligible number, 27, of real-world bugs, showing that static bug detectors are certainly worthwhile and developers should use them during development. (ii) Different bug detectors complement each other in the sense that they detect different subsets of the studied bugs. Users of static bug detectors may want to run more than one tool. (iii) The large majority (95.5%) of the studied bugs are not detected by the studied tools, showing that there is ample of room for improving the current state-of-the-art. (iv) Many of the missed bugs are due to domain-specific problems instead of generic bug patterns, while some currently missed bugs could be found with more powerful variants of existing checks.

本文研究了现有的静态bug检测器可以发现多少个bug。为了解决这个问题，我们研究了一组594个真实的Java bug和3个广泛使用的bug检测工具。我们研究的核心是一种评估缺陷检测器召回的新方法，它通过自动的、基于行的匹配和对检测缺陷候选对象的手动验证相结合来识别检测出的缺陷。该研究的主要发现包括:(i)静态bug检测器发现了一个不可忽视的数字，27个真实的bug，这表明静态bug检测器是值得的，开发人员应该在开发过程中使用它们。(ii)不同的bug检测器在某种意义上是互补的，因为它们可以检测所研究bug的不同子集。使用静态bug检测器的用户可能希望运行多个工具。(iii)大部分(95.5%)被研究的bug没有被研究的工具检测到，这表明有足够的空间来改进当前的技术水平。(iv)许多遗漏的bug是由于领域特定的问题而不是一般的bug模式造成的，而一些当前遗漏的bug可以通过现有检查的更强大的变体找到。

Overall, we conclude that future work should focus not only on reducing false positives, as highlighted by previous studies, but also on detecting a larger fraction of all real-world bugs, e.g., by considering a larger variety of bug patterns and by searching domain-specific bugs. Beyond these findings, which are relevant to users and creators of static bug detectors, our results can serve as a basis for a future study on comparing static analysis with other bug detection techniques, such as manual and automated testing.

总的来说，我们得出的结论是，未来的工作不仅应该像以前的研究强调的那样集中在减少误报上，而且还应该集中在检测所有真实世界bug的更大一部分上，例如，通过考虑各种各样的bug模式和搜索特定于域的bug。除了这些与静态bug检测器的用户和创建者相关的发现之外，我们的结果还可以作为将来比较静态分析和其他bug检测技术(如手动和自动测试)的基础。
